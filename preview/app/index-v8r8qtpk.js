var We=Object.create;var{getPrototypeOf:Fe,defineProperty:oe,getOwnPropertyNames:Je}=Object;var Ve=Object.prototype.hasOwnProperty;var Yt=(e,t,s)=>{s=e!=null?We(Fe(e)):{};let i=t||!e||!e.__esModule?oe(s,"default",{value:e,enumerable:!0}):s;for(let r of Je(e))if(!Ve.call(i,r))oe(i,r,{get:()=>e[r],enumerable:!0});return i};var Zt=function(e,t,s,i){var r=arguments.length,a=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,s):i,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,s,i);else for(var h=e.length-1;h>=0;h--)if(n=e[h])a=(r<3?n(a):r>3?n(t,s,a):n(t,s))||a;return r>3&&a&&Object.defineProperty(t,s,a),a};var Bt=((e)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(e,{get:(t,s)=>(typeof require!=="undefined"?require:t)[s]}):e)(function(e){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Ye=Object.defineProperty,Ze=(e,t)=>{for(var s in t)Ye(e,s,{get:t[s],enumerable:!0,configurable:!0,set:(i)=>t[s]=()=>i})},Be=function(e,t,s,i){var r=arguments.length,a=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,s):i,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,s,i);else for(var h=e.length-1;h>=0;h--)if(n=e[h])a=(r<3?n(a):r>3?n(t,s,a):n(t,s))||a;return r>3&&a&&Object.defineProperty(t,s,a),a},Ge=(e,t)=>{if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)},pe={};Ze(pe,{isWindow:()=>D,isUndefined:()=>me,isStr:()=>ie,isPromise:()=>Qe,isPlainObject:()=>te,isObj:()=>y,isNumber:()=>P,isNum:()=>ge,isNull:()=>N,isNotWindow:()=>S,isInt:()=>we,isFN:()=>j,isDict:()=>ee,isClassOrId:()=>Xe,isBool:()=>se,isAsync:()=>Ke,isArraybuff:()=>Ue,isArr:()=>c});var j=(e)=>typeof e==="function",Ke=(e)=>e.constructor.name==="AsyncFunction",Qe=(e)=>!!e&&typeof e.then==="function",P=(e)=>{return!isNaN(parseFloat(e))&&isFinite(e)},ee=(e)=>{return typeof e==="object"&&e!==null&&!Array.isArray(e)},te=(e)=>{return typeof e==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype},Ue=(e)=>{return e instanceof Uint8Array||e instanceof ArrayBuffer||typeof e==="string"},Xe=(e)=>{return e.startsWith(".")||e.startsWith("#")},se=(e)=>typeof e==="boolean",ie=(e)=>typeof e==="string",c=(e)=>Array.isArray(e),y=(e)=>typeof e==="object",ge=(e)=>typeof e==="number",N=(e)=>e===null,me=(e)=>typeof e==="undefined",we=(e)=>{return Number.isInteger(Number(e))},D=typeof window!=="undefined",S=typeof window==="undefined";function ve(e,t){f(t).forEach(([s,i])=>{ht(e,s,{value:i,writable:!1,configurable:!1,enumerable:!0})})}class R{static set p(e){if(Array.isArray(e))console.log(...e);else console.log(e)}}class E{_c=0;_id="";constructor(e){if(this._c=0,this._id=e??g(5),e?.includes("-")){let[t,s]=[e.split("-").slice(0,-1).join("-"),e.split("-").slice(-1)[0]];this._id=t,this._c=P(s)?parseInt(s):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}var Kt=new RegExp(/(\d+)(\d*)/,"m"),et=(e)=>Array.from({length:e},(t,s)=>s),tt="ABCDEFGHIJKLMNOPQRSTUVWXYZ",st="abcdefghijklmnopqrstuvwxyz",it=et(10).join(""),k=(e)=>JSON.stringify(e),rt=(e)=>{return JSON.parse(e)},G=(e)=>{if(e.startsWith("webkit"))e="-"+e;return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},g=(e)=>{let t=tt+st;return Array.from({length:e},(s,i)=>t+(i?it:"")).reduce((s,i)=>{return s+=i.charAt(Math.floor(Math.random()*i.length))},"")};class u extends Map{obj(e){e&&f(e).forEach(([t,s])=>this.set(t,s))}map(e){e.forEach((t,s)=>{if(t instanceof u)this.set(s,t);else if(c(t)){if(this.lacks(s))this.set(s,[]);this.get(s).push(...t)}else if(y(t))this.ass(s,t);else this.set(s,t)})}ass(e,t){if(!this.has(e))this.set(e,{});m(this.get(e),t)}lacks(e){return!this.has(e)}init(e,t){return this.has(e)?this.get(e):this.set(e,t).get(e)}}var{values:_,keys:C,entries:f}=Object,{hasOwn:at,freeze:nt,defineProperty:ht,assign:m}=Object,v=(e)=>{return Object.keys(e).length},ye=(e,t)=>{if(!t.has(e))t.set(e,new u);return t.get(e)},z=(e,t)=>{if(!t.has(e))t.set(e,[]);return t.get(e)},Ee=(e,t)=>{let s={added:{},removed:{},modified:{}},i=C(e),r=C(t);for(let a of r){let n=e[a],h=t[a];if(!(a in e))s.added[a]=h;else if(c(n)&&c(h)){if(k(n)!==k(h))s.modified[a]={old:n,new:h}}else if(y(n)&&y(h)&&!N(n)&&!N(h)){let o=Ee(n,h);if(v(o.added)||v(o.removed)||v(o.modified))s.modified[a]={old:n,new:h}}else if(n!==h)s.modified[a]={old:n,new:h}}for(let a of i)if(!(a in t))s.removed[a]=e[a];return s};function ot(e,t){if(e.size!==t.size)return!1;for(let s of e)if(!t.has(s))return!1;return!0}var lt=(e)=>{return _(e).some((t)=>{return v(t)})};function ut(e){let t;return class extends e{constructor(...s){if(t)return t;super(...s);nt(this),t=this}}}var b=(e,t)=>{return{name:e,content:t}},ct=(e,t)=>{return{property:e,content:t}},dt=(e,t)=>{return{"http-equiv":e,content:t}};class be{metas=[];constructor(e){e&&this.metas.push(b("description",e))}author(e){return this.meta=b("author",e),this}charset(e){return this.meta={charset:e},this}keywords(...e){return this.meta=b("keywords",e.join(", ")),this}viewport(e){let t=f(e).map(([s,i])=>[G(s),String(i)].join("="));return this.meta=b("viewport",t.join(", ")),this}httpEquiv(e){return f(e).forEach(([t,s])=>{this.meta=dt(G(t),String(s))}),this}robots(...e){return this.meta=b("robots",e.join(", ")),this}themeColor(e){return this.meta=b("theme-color",e),this}openGraph(e){return f(e).forEach(([t,s])=>{this.meta=ct("og:"+t,String(s))}),this}twitter(e){return f(e).forEach(([t,s])=>{this.meta=b("twitter:"+t,String(s))}),this}and(e){return this}set meta(e){this.metas.push(e)}}class ke{title;description;base;meta;link;script;css}var ft=["charset","name","property","http-equiv"],le=(e,t)=>{t.forEach((s)=>{for(let i of ft)if(i in s){let r=s[i];e[`${i}_${i==="charset"?"":r}`]=s}})},pt=(e,t)=>{t.forEach((s)=>{if("href"in s){let i=s.href;e[`${i}`]=s}})};class F{_head;idm;constructor(e){this._head=new u(e)}set head(e){f(e).forEach(([t,s])=>{if(t==="title"||t==="base"){if(s!==void 0)this._head.set(t,s);return}if(s instanceof be)return le(this._head.init("meta",{}),s.metas);if(!c(s))return;switch(t){case"meta":return le(this._head.init("meta",{}),s);case"link":return pt(this._head.init("link",{}),s);case"script":if(s.length){this._head.init(t,[]);let i=s.map((r)=>{if(!r.yid&&this.idm)r.yid="sc"+this.idm.mid;return r});this._head.get(t).push(...i)}return}})}get head(){return this._head}set id(e){this.idm=new E(e)}}var ue=(e)=>{return f(e).reduce((t,[s,i])=>{return t.push(se(i)&&i?s:`${s}="${i}"`),t},[""]).join(" ")},gt=(e)=>{if(!e)return"";return[...e].reduce((t,[s,i])=>{if(s==="meta"||s==="link")i=_(i);if(ie(i))return t.push(`<${s}>${i}</${s}>`),t;if(!c(i))return t;let r=i.map((a)=>{if(s==="script"){let n={...a};if("yid"in n)return"";let h="";if("importmap"in n)n.type="importmap",h=JSON.stringify(n.importmap),delete n.importmap;else if("body"in n)h=n.body,delete n.body;return`<${s}${ue(n)}>${h}</${s}>`}return`<${s}${ue(a)}>`});return t.push(...r),t},[]).join("")};class Se{lang="en";htmlHead=new u;head;constructor(){this.head=(e={})=>{let t=new F(this.htmlHead);t.head=e,this.htmlHead=t.head}}}var mt=(e)=>{if(S)return;return new Promise((t,s)=>{let i=document.createElement("link");if(e.rel!=="stylesheet")e.rel="stylesheet",e.as="style";f(e).forEach(([r,a])=>{i.setAttribute(r,a)}),i.onload=()=>t(i),i.onerror=()=>s(new Error("Failed to load CSS")),document.head.appendChild(i)})},wt=(e)=>{return new Promise((t,s)=>{let i=document.createElement("script"),r="";if("importmap"in e)e.type="importmap",r=JSON.stringify(e.importmap),delete e.importmap;else if("body"in e)r=e.body,delete e.body;if(r)i.innerHTML=r;f(e).forEach(([a,n])=>{i.setAttribute(a,n)}),i.onload=()=>t(i),i.onerror=()=>s(new Error("Failed to load Script")),document.head.appendChild(i)})};var vt=(e,t=!1)=>{if(P(e))return[+e,we(e)?"int":"float"];if(t&&/\.\w+$/.test(e))return[e,"file"];if(e==="/")return[e,"-"];if(e.length===36&&e.match(/\-/g)?.length===4)return[e,"uuid"];return[e,"string"]},_e=(e)=>{let t=e.startsWith("/")?e:"/"+e,s=t.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[i,r]=s.reduce(([a,n],h)=>{if(h.includes("<")){let o=h.match(/(?<=<)[^/].*?(?=>|$)/g);if(o?.length){let[l,d]=o[0].split(":");if(l&&d)a.push(l),n.push(d)}}else a.push(h===">"?"/":h);return[a,n]},[[],[]]);if(t.endsWith("/")&&t.length>1)i.push("/");return{parsed:i,args:r}};class $e{storage=new u;cache(e,t){if(this.storage.lacks(e))this.storage.set(e,t());return this.storage.get(e)}}var yt=["int","float","file","uuid","string"],Et=new $e;class I{_storage=new u;set(e){let{parsed:t,path:s}=e,i=k(t);if(!this._storage.get(i))this._storage.set(i,e);else throw`path: ${s} already used.`}get(e){let{parsed:t}=Et.cache(e,()=>_e(e)),s={},i=this._storage.get(k(t));if(!i&&e!=="/")for(let r of this._storage.keys()){let a=[],n=rt(r);if(t.length===n.length){let h=n.map((l,d)=>{let w=vt(t[d],t.length-1===d);if(l===w[0])return w[0];if(yt.includes(w[1]))return a.push(w[0]),w[1];return l}),o=k(h);if(this._storage.has(o)){i=this._storage.get(o),i?.args.forEach((l,d)=>{s[l]=a[d]});break}}}return[i,s]}}class re{path="";parsed=[];args=[];constructor(e){ve(this,{path:e,..._e(e)})}}class bt{static rand(e=6,t){if(t)return Math.floor(Math.random()*(t-e+1)+e);return Math.floor(Math.random()*e)+1-1}static fill(e,t=null){return Array(e).fill(t)}static new({dom:e,id:t,inner:s}){let i=document.createElement(e);if(t)i.id=t;if(s)i.innerHTML=s;return i}static randFrom(e){if(Array.isArray(e)){let t=e.length,s=this.rand(0,t-1);return e[s]}else if(typeof e=="object"){let t=C(e),s=t.length,i=this.rand(0,s-1);return t[i]}}static makeID=g;static class(e,t){let s=t;if(e?.class)s.push(...c(e.class)?e.class:[e.class]);e.class=t}static get O(){return{vals:_,keys:C,items:f,has:at,ass:m,len:(e={})=>C(e).length}}static get is(){return pe}static get return(){return xe}}class xe{static array(e){return c(e)?e:[e]}}class Ae{value;constructor(e){this.value=e}get str(){return String(this.value).toString()=="null"?null:String(this.value).toString()}get int(){if(P(this.value))return parseInt(this.value);else return null}get float(){if(P(this.value))return parseFloat(this.value);else return null}get bool(){if(this.value==="true")return!0;else if(this.value=="false")return!1;else return null}get json(){if(this.value)return JSON.parse(this.value);return null}}class je{key;func;storage;constructor(e,t="local"){if(typeof e=="object"){let[s,i]=f(e)[0];this.key=s,this.func=i}else this.key=e,this.func=null;this.storage=t=="local"?localStorage:sessionStorage}get as(){return new Ae(this.storage.getItem(this.key))}get value(){return this.storage.getItem(this.key)}get save(){if(this.func)this.set=this.func();return}set set(e){if(typeof e=="object")this.storage.setItem(this.key,JSON.stringify(e));else this.storage.setItem(this.key,String(e))}get remove(){this.storage.removeItem(this.key);return}}var ce={get:(e)=>new je(e)};class O extends re{id;cls;constructor(e,t,s){super(e);this.id=t,this.cls=s}}class K extends re{id;cls;constructor(e,t,s){super(e);this.id=t,this.cls=s}}class Me extends Se{prefix;storage=new I;errorStorage=new I;wssStorage=new I;route;error;wss;constructor(e){super();this.prefix=e,this.route=(t)=>{return(s)=>{if(this.storage.set(new O(t,g(5),s)),this.prefix)this.storage.set(new O(this.prefix+t,g(5),s));return s}},this.wss=(t)=>{return(s)=>{if(this.wssStorage.set(new K(t,g(5),s)),this.prefix)this.wssStorage.set(new K(this.prefix+t,g(5),s));return s}},this.error=(...t)=>{return(s)=>{if(t.length)t.forEach((i)=>{this.errorStorage.set(new O(i.toString(),g(5),s))});else this.errorStorage.set(new O("404",g(5),s));return s}}}async getPath(e){return this.storage.get(e)}async loadError(e){return this.errorStorage.get(e.toString())}async loadWSS(e){return this.wssStorage.get(e)}}var L=new u,Q=(e)=>{if(S)return;let t=L.get(e);if(t?.isConnected)return t;L.delete(e);let s=document.getElementById(e);if(!s)return;return L.set(e,s),s};function kt(){let e=[];return L.forEach((t,s)=>{if(!t.isConnected)e.push(s),L.delete(s)}),e}function Oe(e,t,{id:s="state",init:i}={}){let r=[],a=()=>t.map((h)=>h.value),n=()=>{e(...a())};if(t.forEach((h)=>{r.push(h.hook(n)(s))}),i)n();return()=>{r.forEach((h)=>h())}}var St=(e)=>{e.forEach((t)=>t())},_t=(e,t)=>{for(let[s,i]of e){let r=Q(s);if(!r){e.delete(s);continue}i.forEach((a)=>{a.call(r,t)})}};class J extends EventTarget{options;hooks=new u;states=new u;_value;listening=!1;end;constructor(e,t){super();this.options=t,this._value=e}get value(){return this._value}set value(e){if(N(e)||me(e))return;if(te(this._value)||c(this._value)){let t=Ee(this._value,e);if(!lt(t))return}else if(this._value instanceof Set){if(!ot(this._value,e))return}else if(this._value===e)return;this._value=e,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let e=(t)=>{if(St(this.hooks),_t(this.states,t.detail),!this.states.size&&!this.hooks.size)this.end?.()};if(!this.listening)this.addEventListener("updated",e,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",e,this.options),this.end=void 0,this.listening=!1}}call(e,t){return(s)=>{if(ye(s,this.states).set(t,e),!S&&!this.listening)this.end=this.listen;return()=>{if(this.states.has(s))this.states.get(s)?.delete(t)}}}hook(e){return(t)=>{if(this.hooks.set(t,e),!S&&!this.listening)this.end=this.listen;return()=>{if(this.hooks.has(t))this.hooks.delete(t)}}}}function x(e){return new J(e)}var q=(e)=>{if(c(e))return e.filter((t)=>t!==void 0).join(" ");else if(y(e)){if(ee(e))return k(e)}else if(j(e))return q(e());else if(e!==void 0&&e!==null)return se(e)?e?"":"false":String(e);return""};function $t(e,t){switch(t??e){case"style":return function(s){this.style.setProperty(e,s)};default:return function(s){this.setAttribute(e,s)}}}class Ce{attr;constructor(e={}){this.attr=e}get(e,t=this.attr,s){let i=(r,a)=>{if(c(a))e.attr_push(r,q(a));else if(a instanceof J){let n=s?`${s}_${r}`:r;e.states.push(a.call($t(r,s),n)),i(r,a.value)}else if(y(a)){if(ee(a)&&!s)this.get(e,a,r)}else e.attr_push(r,q(a),s)};f(t).forEach(([r,a])=>{if(["on"].includes(r))y(t.on)&&e.events.obj(t.on);else i(r,a)})}}class ae{xid;IDM;map=new u;states=[];events=new u;OZ;constructor(e,t=new E,s){this.xid=e,this.IDM=t,this.OZ=s??new ne}attr_push(e,t,s){let i=s??e;if(!this.map.has(i))this.map.set(i,[]);let r=s?`${G(e)}:${t};`:t;this.map.get(i).push(r)}get attr(){let e=[""];return this.map.forEach((t,s)=>{let i=t.join("");e.push(i?`${s}="${i}"`:s)}),e.join(" ")}set id(e){if(!this.map.has("id"))this.map.set("id",[e])}get id(){return this.map.get("id")?.join("")}}var xt=(e,t,s)=>{return e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}},M={};class ne{events=new u;states=new u;winStates=new u;windowEvents=new u;resetST=new u;resetEV=new u;constructor(){}get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(e){let{id:t,events:s,states:i}=e;if(t){if(s.size)this.events.set(t,s);if(i.length)this.states.set(t,i)}return this}push(e){return e.events.forEach((t,s)=>{t.forEach((i,r)=>{ye(s,this.events).set(r,i)})}),e.states.forEach((t,s)=>{z(s,this.states).push(...t)}),this}get stage(){return this.events.forEach((e,t)=>{this.events.delete(t);let s=Q(t);if(!s){this.events.delete(t);return}e.forEach((i,r)=>{switch(r){case"ready":i.apply(s,[s]);break;case"resize":case"beforeunload":case"popstate":case"winscroll":case"winload":case"winfocus":case"winblur":let a=r.replace(/^win/,"");this.windowEvents.init(a,new u).set(t,i);break;case"watch":let[n,h,o]=i.apply(s,[s]),l=c(h)?h:[h],d=()=>l.map((Y)=>Y.value),w=()=>n(...d());if(o)w();l.forEach((Y)=>z(t,this.resetST).push(Y.call(w,t+"_watch")(t)));break;default:z(t,this.resetEV).push(xt(s,r,i))}})}),this.processWindowEvents,this.states.forEach((e,t)=>{this.states.delete(t),e.forEach((s)=>{z(t,this.resetST).push(s(t))})}),this}get processWindowEvents(){let e=(t,s)=>{let i=(r)=>{s.forEach((a,n)=>{let h=Q(n);if(h)a.call(h,r);else this.windowEvents.get(t)?.delete(n)})};return window.addEventListener(t,i),()=>{window.removeEventListener(t,i)}};return this.windowEvents.forEach((t,s)=>{if(t.size){if(!M[s])M[s]=e(s,t)}else if(M[s])M[s](),delete M[s]}),this}reset(e){return e.forEach((t)=>{this.windowEvents.forEach((s,i)=>{if(s.has(t))s.delete(t)}),this.resetEV.get(t)?.forEach((s)=>{s()}),this.resetST.get(t)?.forEach((s)=>{s()}),this.resetST.delete(t),this.resetEV.delete(t)}),this}RPS(e){if(e){let t=kt();this.reset(t);let s=e.keys;if(s.length)this.reset(s).push(e).stage}return this}}var A=new ne,At=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],jt=(e)=>At.includes(e);function Mt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var W=(e,t)=>{if(c(e))return e.map((s)=>W(s,t)).join("");else if(e instanceof H){let s=e.__(t.IDM),{ctx:i,oz:r}=s;return t.OZ.push(r),i}else if(y(e))return k(e);else if(j(e))return W(e(),t);else if(e!==void 0&&e!==null)return Mt(e);return""},Le=(e,t)=>{let s=new E(e),i=new ae(s.id,s);return{ctx:W(t,i),catt:i}};function Ot(e){let t=this.id;if(t){let{ctx:s,catt:i}=Le(t,e);if(this.innerHTML!==s)this.innerHTML=s,A.RPS(i.OZ)}}var U=(e,t,s,i=[])=>{if(c(e))e.forEach((r)=>{U(r,e.length,s,i)});else if(e instanceof J)if(t>1)U(V("div",{},e),t,s,i);else{let r=e.value,a=r instanceof H?"dom":"ctx",{ctx:n,catt:h}=Le(s.xid+"-0",r);s.xid=h.xid,i.push(n),s.OZ.push(h.OZ),s.states.push(e.call(Ot,a))}else i.push(W(e,s))};class Pe{tag;ctx;closing;constructor(e,t){this.tag=e,this.ctx=t;let s=jt(e);this.closing=s?"":`</${e}>`}process(e,t=this.ctx,s=[]){return t.forEach((i)=>{U(i,t.length,e,s)}),s.join("")}get(e){let t=this.process(e);if(e.events.size||e.states.length)e.id=e.xid;return`<${this.tag}${e.attr}>${t}${this.closing}`}}class H{tag;constructor(e,t={},...s){this.tag=e,ve(this,{attr:new Ce(t),ctx:new Pe(e,s)})}__(e=new E){let t=e.mid,s=new ae(t,e);return this.attr.get(s),{ctx:this.ctx.get(s),oz:s.OZ.set(s),id:s.id}}}function V(e,t={},...s){if(j(e))return e(t??{},...s);return new H(e,t??{},s)}var Qt=(e,...t)=>t;class Te{e;opt;constructor(e){this.e=e,this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(e,t={}){return this.e.animate(e,t)}get slide(){let e=({x:t=0,y:s=0},i={})=>{m(this.opt,i);let r=[[t,s],[0,0]].map(([a,n])=>({transform:`translateX(${a}rem) translateY(${n}rem)`}));return this.e.animate(r,this.opt),this};return{left:(t={})=>{return e({x:-2},t)},right:(t={})=>{return e({x:2},t)},up:(t={})=>{return e({y:2},t)},down:(t={})=>{return e({y:-2},t)}}}fade(e={}){m(this.opt,e);let t=[0,1].map((s)=>({opacity:s}));return this.e.animate(t,this.opt),this}shake(e="Y",t={}){m(this.opt,t);let s=[0,5,-5,5,0].map((i)=>({transform:`translate${e}(${i}px)`}));return this.e.animate(s,this.opt),this}color(e=[],t={}){m(this.opt,t);let s=Array.isArray(e)?e.map((i)=>({color:i})):{color:e};return this.e.animate(s,this.opt),this}bg(e=[],t={}){m(this.opt,t);let s=Array.isArray(e)?e.map((i)=>({backgroundColor:i})):{backgroundColor:e};return this.e.animate(s,this.opt),this}bounce(e=1,t={}){m(this.opt,t);let s=[0.5,e,1].map((i)=>({transform:`scale(${i})`}));return this.e.animate(s),this}}class Re{e;query;constructor(e,t){this.e=e,this.query=t}get a(){return new Te(this)}get all(){if(this.query){let e=document.querySelectorAll(this.query);if(e.length)return Array.from(e).map((t)=>t)}return[]}get attr(){let e=this.e;return{has:(t)=>{return e.hasAttribute(t)},get:(t)=>{return e.getAttribute(t)},del:(t)=>{return e.removeAttribute(t),this},set:(t)=>{for(let s in t){let i=t[s];if(t[s]!==void 0)e.setAttribute(s,q(i))}return this}}}get children(){return Array.from(this.e.children).map((e)=>p(e))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get href(){return this.e?.href??""}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let e=this.e.offsetParent;if(e)return new T(e);return}get parent(){let e=this.e.parentElement;if(e)return new T(e);return}get path(){return this.e?.pathname??""}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let e=this.e.style,t=this;return{set:(s,i=0)=>{let r=e,a=()=>{f(s).forEach(([n,h])=>{if(n in r){if(r[n]!==h)r[n]=h}else if(h!==null)e.setProperty(n,String(h))})};if(j(i))t.on("transitionend",i);if(ge(i))setTimeout(a,i);else a();return t},get:(s)=>{return e.getPropertyValue(s.toString())},del:(...s)=>{s.forEach((i)=>{e.removeProperty(i.toString())})}}}get submit(){let e=this.e;if("submit"in e)return e.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}get unload(){return()=>{this.e.remove()}}set append(e){let{ctx:t,oz:s}=Z(e,B(this.id));this.e.insertAdjacentHTML("beforeend",t),A.RPS(s)}set appendfirst(e){let{ctx:t,oz:s}=Z(e,B(this.id));this.e.insertAdjacentHTML("afterbegin",t),A.RPS(s)}set inner(e){let{ctx:t,oz:s}=Z(e,B(this.id));this.e.innerHTML=t,A.RPS(s)}set disabled(e){let t=this.e;if("disabled"in t)t.disabled=e}set id(e){this.e.id=e}set value(e){let t=this.e;t.value=e}}var Z=(e,t)=>{if(e instanceof H)return e.__(new E(t));return{ctx:e,oz:void 0}},B=(e)=>e?`${e}-0`:e;class T extends Re{constructor(e,t){super(e,t)}add(...e){return this.e.classList.add(...e.map((t)=>t.replace(/[^\w-]/,""))),this}remove(...e){return this.e.classList.remove(...e.map((t)=>t.replace(/[^\w-]/,""))),this}toggle(e,t){let s=typeof e!="string"?e.apply(this):e,i=this.e.classList;return s.split(" ").forEach((r)=>{i.toggle(r,t)}),this}has(e){return this.e.contains(e)}insert(e){return{HTML:(...t)=>{return t.forEach((s)=>{this.e.insertAdjacentHTML(e,s)}),this},element:(...t)=>{return t.forEach((s)=>{this.e.insertAdjacentElement(e,s)}),this},text:function(...t){return t.forEach((s)=>{this.e.insertAdjacentText(e,s)}),this}}}is(e){let t=this.e.classList.value.split(" "),s=this.e.tagName.toLocaleLowerCase(),i=!0,r=!0;if(e.dom)r=e.dom==s?!0:!1;if(e.class)if(Array.isArray(e.class))e.class.forEach((a)=>{i=i?t.includes(a):!1});else i=i?t.includes(e.class):!1;return i&&r}on(e,t,s=!1){let i=!1;if(e.indexOf("touch")>-1)i=!0;return this.e.addEventListener(e,t,{capture:s,passive:i}),this}remove_on(e,t,s=!1){return this.e.removeEventListener(e,t,s),this}timed(e,t=250){return setTimeout(()=>e(this),t),this}animate(e,t,s){let i={duration:300,easing:"ease",fill:"forwards"};if(j(t))s=t;else m(i,t);let r=this.e.animate(e,i);if(s)r.finished.then(s);return this}}function p(e){if(ie(e)){let t=document.querySelector(e);if(t)return new T(t,e);return}else return new T(e)}class He extends ke{path;args;id;status;lang;import;_data={};constructor(e,t={},s,i=200){super();this.path=e,this.args=t,this.id=s,this.status=i}async loader(){if(this.import)try{let e=await this.import;if(e.default)this.import=await e.default({...this.args,...this.data});else this.import=void 0}catch(e){R.p=e,this.import=void 0}if(this.body){let e=await this.body();return c(e)?e:[e]}if(this.import){let e=this.import;return c(e)?e:[e]}return[]}getHeadAttr(e={},...t){let s=new F;if(v(e))s.head=e;s.id=this.id;let i=s.head;return t.forEach((r)=>{i.map(r)}),Ct(s,this),i}set data(e){m(this._data,e)}get data(){return this._data}}class ze extends He{head(){this.title=`error ${this.status}`}body(){return V("div",{},this.path+" not found...")}}function Ct(e,t){let{link:s,script:i,meta:r,title:a,base:n,description:h,css:o}=t;if(e.head={title:a,base:n,meta:r,link:s,script:i},h)e.head={meta:[{name:"description",content:h}]};if(o){let l=(c(o)?o:[o]).map((d)=>({rel:`${S?"preload ":""}stylesheet`,href:d,as:"style"}));if(e.head.lacks("link"));e.head={link:[...l]}}}function Lt(e){let t=[];if(e?.length){let{href:s,target:i}=e[0],r=p("base");if(r)r.attr.set({href:s,target:i});else{let a=p(document.createElement("base"));a.attr.set({href:s,target:i}),document.head.append(a.e)}}else{let s=p("base")?.unload;s&&t.push(s)}return t}var de=new u;async function Pt(e,t={},s=!1){let i=he.value,r={};if(p("link")?.all.forEach((a)=>{let n=p(a),h=n.attr.get("href");if(h){let o=n.attr.get("rt");if(s){let l=de.get(i);if(l){if(!l.has(h))r[h]=n.unload}else r[h]=n.unload}else if(o){if(o===e)r[h]=n.unload}}}),t&&v(t))for(let a of _(t)){let n=a.href;if(!(n in r))try{if(!s){a.rt=e;let h=de.init(i,new Set);if(!h.has(n))h.add(n)}await mt(a)}catch(h){R.p=h}else delete r[n]}return _(r)}var Tt=["charset","name","property","http-equiv"];function Rt(e){let t={};if(p("meta")?.all.forEach((s)=>{let i=s.attributes;for(let r of Tt)if(r in i){let a=i[r].value;t[`${r}_${r==="charset"?"":a}`]=s}}),e)f(e).forEach(([s,i])=>{if(s in t)p(t[s]).attr.set(i),delete t[s];else{let r=p(document.createElement("meta"));r.attr.set(i),document.head.append(r.e)}});return _(t).map((s)=>p(s).unload)}var fe=new u;async function Ht(e,t,s=!1){let i=he.value,r={};if(p("script[yid]")?.all.forEach((a)=>{let n=p(a),h=n.attr.get("yid");if(h){let o=n.attr.get("rt");if(s){let l=fe.get(i);if(l){if(!l.has(h))r[h]=n.unload}else r[h]=n.unload}else if(o){if(o===e)r[h]=n.unload}}}),t){for(let a of t)if("yid"in a)if(a.yid in r)delete r[a.yid];else try{if(!s){a.rt=e;let n=a.yid,h=fe.init(i,new Set);if(!h.has(n))h.add(n)}await wt(a)}catch(n){R.p=n}}return _(r)}async function zt(e,t,s=!1){let i=[];if(S)return[];let r=e.get("title")??"";if(s){let{pushState:a}=this.config,n=this.path.value;if(a)Ie(n,r);document.documentElement.lang=t,document.title=r}if(s)i.push(...Lt(e.get("base"))),i.push(...Rt(e.get("meta")));return i.push(...await Pt(this.id,e.get("link"),s)),i.push(...await Ht(this.id,e.get("script"),s)),i}function Ie(e,t){let s=window.location.pathname;if(e&&s!==e)history.pushState({},t??"",e)}class Ne{lang;head="";constructor(e,t){if(this.lang=e,t)this.head=gt(t)}body(e,t,s){return[`<!DOCTYPE html><html lang="${this.lang}">`,`<head>${this.head}</head>`,`<body id="${t??g(5)}"${s?" "+s:""}>${e}</body>`,"</html>"].join("")}}class It{path;args;isConnected=x(!1);data={};constructor(e,t={}){this.path=e,this.args=t}open(e){}message(e){}close(e){}error(e){}get connect(){if(this.ws&&this.ws.readyState<=1)return this;return this.ws=new WebSocket(this.path),this.ws.onopen=async(e)=>{this.isConnected.value=!0,await this.open.call(this,e)},this.ws.onmessage=async(e)=>{await this.message.call(this,e)},this.ws.onclose=async(e)=>{this.isConnected.value=!1,await this.close.call(this,e)},this.ws.onerror=async(e)=>{this.isConnected.value=this.ws.readyState<=1,await this.error.call(this,e)},this}get reconnect(){if(this.state>=2)this.connect;return this}get disconnect(){if(this.state<=1)this.ws.close();return this}get state(){return this.ws?.readyState??3}set send(e){this.ws.send(e)}}var $=new u;class De{yra;constructor(e){this.yra=e}async load(e){if(!$.has(e)){let[s,i]=await this.yra.loadWSS(e);if(!s)return;let{cls:r,path:a,id:n}=s,h=new r(a,i).connect;return $.set(e,h),h}let t=$.get(e);return t.reconnect,t}unload(e){if($.has(e)){let t=$.get(e);if(!t)return;t.disconnect,$.delete(e)}}}function Nt(e,t,s,i){let r={...e.on??{},click(a){a.preventDefault(),i.value=s.value,s.value=p(this).path}};return delete e.on,V("a",{...e,on:{...r}},...t)}function Dt(e,t,s){let{classes:i}=e.config,{load:r,on:a,...n}=t,h={...t.on??{},...!s&&r&&{ready(o){e.load(r)}},...s&&{popstate(o){let l=o.target;e.path.value=l.location.pathname}}};return V("div",{...n,...i&&{class:i},on:h},e.root)}class qe extends Me{config;isYRA;unload=!1;hook;root=x([]);socket;id=g(4);path=x("");lastPath=x("");A;Main;load;constructor(e={},t=!1){super(e.prefix);if(this.config=e,this.isYRA=t,this.socket=new De(this),e.id)this.id=e.id;this.A=(s,...i)=>{if(this.prefix)s.href=this.prefix+s.href;return Nt(s,i,this.path,this.lastPath)},this.Main=(s)=>{return Dt(this,s,t)},this.load=async(s,i={})=>{if(this.hook)this.hook();if(s)this.path.value=s,this.lastPath.value=s,this.lang=s,await this.render(s,404,i),this.hooker();return this}}hooker(){let e={},t=this.path.value;if(this.hook)this.hook();this.hook=Oe(async(s)=>{if(e[t]=window.scrollY,(await this.render(s,404)).done)window.scrollTo({top:e[s]??0,behavior:"instant"}),t=s},[this.path],{id:"router"})}async class(e,t,s=!1){let[i,r]=await this.getPath(e);if(i&&!s){let{cls:a,path:n,id:h}=i;return new a(n,r,h)}else return qt.call(this,e,t)}async fetch(e){if(e)try{if(e.fetch){let t=await e.fetch();if(te(t)&&v(t))e.data=t}}catch(t){R.p=t}}async processHead(e,t={}){return e?await this.processClassHead(e,t):await this.processDefaultHead(t)}async processClassHead(e,t){if(e.head)await e.head();return e.getHeadAttr(t,this.htmlHead)}async processDefaultHead(e){let t=new F;if(v(e))t.head=e;return t.head.map(this.htmlHead),t.head}async render(e,t=404,s={},i={},r=!0,a=!1){let n=await this.class(e,t??Jt(),a);n.data=s,await this.fetch(n);let h=await this.processHead(n,i);if(!n)return{lang:this.lang,heads:h,done:!1};let o=[];if(this.unload)o=await n.loader();let l=[];if(r)l=await zt.call(this,h,n?.lang||this.lang,this.unload);if(!this.unload)l.forEach((d)=>d()),o=await n.loader();if(this.unload)l.forEach((d)=>d());if(o.length)this.root.value=o;else await this.render(e,t,s,i,r,!0);return{heads:h,lang:n.lang??this.lang,done:!0}}}async function qt(e,t){let[s,i]=await this.loadError(t??0);if(s){let{cls:r,id:a}=s;return new r(e,i,a,t)}else{let r=new ze(e,i,g(5));return r.title=`error ${t}`,r}}var he=x("");class Wt extends qe{ImportMeta;config;unload=!0;constructor(e,t={}){super(t,!0);this.ImportMeta=e,this.config=t,this.path=he,this.head({meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"}]}),this.load=async(s,i={})=>{if(D)s=s||location.pathname;if(this.hook)this.hook();if(s)this.path.value=s;if(D&&s)this.render(s,404,i).then(()=>{if(s&&this.config.pushState)Ie(s,document.title);Ft.call(this,this.Main({})),this.hooker()});return this}}async html({path:e,data:t={},status:s=200,attr:i=""}){let r={script:[{type:"module",src:this.ImportMeta.file}]};Vt(r,s),this.path.value=e;let{lang:a,heads:n}=await this.render(e,s,t,r,!1),{ctx:h}=this.Main({}).__(new E(this.id));return new Ne(a,n).body(h,this.id,i)}}function Ft(e){let t=document.body.id,{oz:s,id:i}=e.__(new E(t));if(this.id=i||this.id,!s)return;A.push(s),requestAnimationFrame(()=>{A.stage})}function Jt(){if(D)return parseInt(p('meta[name="error-code"]')?.attr.get("content")??"404");return 404}var Vt=(e,t)=>{switch(t){case 404:e.meta=[{name:"error-code",content:t.toString()}];return;default:return}};class X{state;body;click;constructor({toggle:e=[],initialState:t=!1}={}){this.state=x(t);let s=this.state;this.click=function(){s.value=!s.value},this.loader(e)}loader(e){if(typeof window==="undefined")return;let t=ce.get("LOCAL_SCHEME"),s=this.isDark,i=t.as.bool,r=ce.get({IS_DARK:()=>this.state.value});if(i!=null&&i!==s)this.state.value=!i,r.save,t.set=s;if(r.as.bool!==null)this.state.value=r.as.bool;let a=this.toggle,n=document.documentElement.classList;if(a(n,this.state.value,e),Oe(async(h)=>{a(n,h,e),r.save},[this.state],{id:"colorScheme"}),this.isMatchMediaSupported)window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(h)=>{let o=(h.matches?"dark":"light")==="dark";this.state.value=o,t.set=o})}get isMatchMediaSupported(){return window.matchMedia&&typeof window.matchMedia==="function"}get isDark(){return window.matchMedia("(prefers-color-scheme: dark)").matches}toggle(e,t,s){if(t)e.add(...s);else e.remove(...s)}}X=Be([ut,Ge("design:paramtypes",[Object])],X);
export{Yt as a,Zt as b,Bt as c,be as d,bt as e,V as f,Qt as g,p as h,He as i,qe as j,Wt as k};

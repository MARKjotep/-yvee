var Zt=Object.create;var{getPrototypeOf:Yt,defineProperty:G,getOwnPropertyNames:Jt}=Object;var Vt=Object.prototype.hasOwnProperty;var Ke=(t,e,s)=>{s=t!=null?Zt(Yt(t)):{};let r=e||!t||!t.__esModule?G(s,"default",{value:t,enumerable:!0}):s;for(let i of Jt(t))if(!Vt.call(r,i))G(r,i,{get:()=>t[i],enumerable:!0});return r};var Xe=(t,e)=>{for(var s in e)G(t,s,{get:e[s],enumerable:!0,configurable:!0,set:(r)=>e[s]=()=>r})};var Ue=function(t,e,s,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,s):r,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(t,e,s,r);else for(var h=t.length-1;h>=0;h--)if(n=t[h])a=(i<3?n(a):i>3?n(e,s,a):n(e,s))||a;return i>3&&a&&Object.defineProperty(e,s,a),a};var Qe=((t)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(t,{get:(e,s)=>(typeof require!=="undefined"?require:e)[s]}):t)(function(t){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Bt=Object.defineProperty,Gt=(t,e)=>{for(var s in e)Bt(t,s,{get:e[s],enumerable:!0,configurable:!0,set:(r)=>e[s]=()=>r})},Kt=function(t,e,s,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,s):r,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(t,e,s,r);else for(var h=t.length-1;h>=0;h--)if(n=t[h])a=(i<3?n(a):i>3?n(e,s,a):n(e,s))||a;return i>3&&a&&Object.defineProperty(e,s,a),a},Xt=(t,e)=>{if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,e)},mt={};Gt(mt,{isWindow:()=>R,isUndefined:()=>vt,isStr:()=>at,isPromise:()=>Qt,isPlainObject:()=>rt,isObj:()=>y,isNumber:()=>C,isNum:()=>wt,isNull:()=>F,isNotWindow:()=>_,isInt:()=>yt,isFN:()=>M,isDict:()=>st,isClassOrId:()=>ee,isBool:()=>it,isAsync:()=>Ut,isArraybuff:()=>te,isArr:()=>f});var M=(t)=>typeof t==="function",Ut=(t)=>t.constructor.name==="AsyncFunction",Qt=(t)=>!!t&&typeof t.then==="function",C=(t)=>{return!isNaN(parseFloat(t))&&isFinite(t)},st=(t)=>{return typeof t==="object"&&t!==null&&!Array.isArray(t)},rt=(t)=>{return typeof t==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype},te=(t)=>{return t instanceof Uint8Array||t instanceof ArrayBuffer||typeof t==="string"},ee=(t)=>{return t.startsWith(".")||t.startsWith("#")},it=(t)=>typeof t==="boolean",at=(t)=>typeof t==="string",f=(t)=>Array.isArray(t),y=(t)=>typeof t==="object",wt=(t)=>typeof t==="number",F=(t)=>t===null,vt=(t)=>typeof t==="undefined",yt=(t)=>{return Number.isInteger(Number(t))},R=typeof window!=="undefined",_=typeof window==="undefined";function bt(t,e){d(e).forEach(([s,r])=>{ue(t,s,{value:r,writable:!1,configurable:!1,enumerable:!0})})}class T{static set p(t){if(Array.isArray(t))console.log(...t);else console.log(t)}}class b{_c=0;_id="";constructor(t){if(this._c=0,this._id=t??m(5),t?.includes("-")){let[e,s]=[t.split("-").slice(0,-1).join("-"),t.split("-").slice(-1)[0]];this._id=e,this._c=C(s)?parseInt(s):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}var es=new RegExp(/(\d+)(\d*)/,"m"),se=(t)=>Array.from({length:t},(e,s)=>s),re="ABCDEFGHIJKLMNOPQRSTUVWXYZ",ie="abcdefghijklmnopqrstuvwxyz",ae=se(10).join(""),S=(t)=>JSON.stringify(t),ne=(t)=>{return JSON.parse(t)},U=(t)=>{if(t.startsWith("webkit"))t="-"+t;return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},m=(t)=>{let e=re+ie;return Array.from({length:t},(s,r)=>e+(r?ae:"")).reduce((s,r)=>{return s+=r.charAt(Math.floor(Math.random()*r.length))},"")},he=(t,e)=>{let s=e==="/"?"":e;return e.startsWith("/")?t+s:e};class u extends Map{obj(t){t&&d(t).forEach(([e,s])=>this.set(e,s))}map(t){t.forEach((e,s)=>{if(e instanceof u)this.set(s,e);else if(f(e)){if(this.lacks(s))this.set(s,[]);this.get(s).push(...e)}else if(y(e))this.ass(s,e);else this.set(s,e)})}ass(t,e){if(!this.has(t))this.set(t,{});g(this.get(t),e)}lacks(t){return!this.has(t)}init(t,e){return this.has(t)?this.get(t):this.set(t,e).get(t)}}var{values:$,keys:L,entries:d}=Object,{hasOwn:oe,freeze:le,defineProperty:ue,assign:g}=Object,w=(t)=>{return Object.keys(t).length},Et=(t,e)=>{if(!e.has(t))e.set(t,new u);return e.get(t)},z=(t,e)=>{if(!e.has(t))e.set(t,[]);return e.get(t)},kt=(t,e)=>{let s={added:{},removed:{},modified:{}},r=L(t),i=L(e);for(let a of i){let n=t[a],h=e[a];if(!(a in t))s.added[a]=h;else if(f(n)&&f(h)){if(S(n)!==S(h))s.modified[a]={old:n,new:h}}else if(y(n)&&y(h)&&!F(n)&&!F(h)){let o=kt(n,h);if(w(o.added)||w(o.removed)||w(o.modified))s.modified[a]={old:n,new:h}}else if(n!==h)s.modified[a]={old:n,new:h}}for(let a of r)if(!(a in e))s.removed[a]=t[a];return s};function ce(t,e){if(t.size!==e.size)return!1;for(let s of t)if(!e.has(s))return!1;return!0}var fe=(t)=>{return $(t).some((e)=>{return w(e)})};function de(t){let e;return class extends t{constructor(...s){if(e)return e;super(...s);le(this),e=this}}}var E=(t,e)=>{return{name:t,content:e}},pe=(t,e)=>{return{property:t,content:e}},ge=(t,e)=>{return{"http-equiv":t,content:e}};class St{metas=[];constructor(t){t&&this.metas.push(E("description",t))}author(t){return this.meta=E("author",t),this}charset(t){return this.meta={charset:t},this}keywords(...t){return this.meta=E("keywords",t.join(", ")),this}viewport(t){let e=d(t).map(([s,r])=>[U(s),String(r)].join("="));return this.meta=E("viewport",e.join(", ")),this}httpEquiv(t){return d(t).forEach(([e,s])=>{this.meta=ge(U(e),String(s))}),this}robots(...t){return this.meta=E("robots",t.join(", ")),this}themeColor(t){return this.meta=E("theme-color",t),this}openGraph(t){return d(t).forEach(([e,s])=>{this.meta=pe("og:"+e,String(s))}),this}twitter(t){return d(t).forEach(([e,s])=>{this.meta=E("twitter:"+e,String(s))}),this}and(t){return this}set meta(t){this.metas.push(t)}}class _t{title;description;base;meta;link;script;css}var me=["charset","name","property","http-equiv"],ct=(t,e)=>{e.forEach((s)=>{for(let r of me)if(r in s){let i=s[r];t[`${r}_${r==="charset"?"":i}`]=s}})},we=(t,e)=>{e.forEach((s)=>{if("href"in s){let r=s.href;t[`${r}`]=s}})};class J{_head;idm;constructor(t){this._head=new u(t)}set head(t){d(t).forEach(([e,s])=>{if(e==="title"||e==="base"){if(s!==void 0)this._head.set(e,s);return}if(s instanceof St)return ct(this._head.init("meta",{}),s.metas);if(!f(s))return;switch(e){case"meta":return ct(this._head.init("meta",{}),s);case"link":return we(this._head.init("link",{}),s);case"script":if(s.length){this._head.init(e,[]);let r=s.map((i)=>{if(!i.yid&&this.idm)i.yid="sc"+this.idm.mid;return i});this._head.get(e).push(...r)}return}})}get head(){return this._head}set id(t){this.idm=new b(t)}}var ft=(t)=>{return d(t).reduce((e,[s,r])=>{return e.push(it(r)&&r?s:`${s}="${r}"`),e},[""]).join(" ")},ve=(t)=>{if(!t)return"";return[...t].reduce((e,[s,r])=>{if(s==="meta"||s==="link")r=$(r);if(at(r))return e.push(`<${s}>${r}</${s}>`),e;if(!f(r))return e;let i=r.map((a)=>{if(s==="script"){let n={...a};if("yid"in n)return"";let h="";if("importmap"in n)n.type="importmap",h=JSON.stringify(n.importmap),delete n.importmap;else if("body"in n)h=n.body,delete n.body;return`<${s}${ft(n)}>${h}</${s}>`}return`<${s}${ft(a)}>`});return e.push(...i),e},[]).join("")};class $t{lang="en";htmlHead=new u;head;constructor(){this.head=(t={})=>{let e=new J(this.htmlHead);e.head=t,this.htmlHead=e.head}}}var ye=(t)=>{if(_)return;return new Promise((e,s)=>{let r=document.createElement("link");if(t.rel!=="stylesheet")t.rel="stylesheet",t.as="style";d(t).forEach(([i,a])=>{r.setAttribute(i,a)}),r.onload=()=>e(r),r.onerror=()=>s(new Error("Failed to load CSS")),document.head.appendChild(r)})},be=(t)=>{return new Promise((e,s)=>{let r=document.createElement("script"),i="";if("importmap"in t)t.type="importmap",i=JSON.stringify(t.importmap),delete t.importmap;else if("body"in t)i=t.body,delete t.body;if(i)r.innerHTML=i;d(t).forEach(([a,n])=>{r.setAttribute(a,n)}),r.onload=()=>e(r),r.onerror=()=>s(new Error("Failed to load Script")),document.head.appendChild(r)})};var Ee=(t,e=!1)=>{if(C(t))return[+t,yt(t)?"int":"float"];if(e&&/\.\w+$/.test(t))return[t,"file"];if(t==="/")return[t,"-"];if(t.length===36&&t.match(/\-/g)?.length===4)return[t,"uuid"];return[t,"string"]},At=(t)=>{let e=t.startsWith("/")?t:"/"+t,s=e.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[r,i]=s.reduce(([a,n],h)=>{if(h.includes("<")){let o=h.match(/(?<=<)[^/].*?(?=>|$)/g);if(o?.length){let[l,c]=o[0].split(":");if(l&&c)a.push(l),n.push(c)}}else a.push(h===">"?"/":h);return[a,n]},[[],[]]);if(e.endsWith("/")&&e.length>1)r.push("/");return{parsed:r,args:i}};class jt{storage=new u;cache(t,e){if(this.storage.lacks(t))this.storage.set(t,e());return this.storage.get(t)}}var ke=["int","float","file","uuid","string"],Se=new jt;class q{_storage=new u;set(t){let{parsed:e,path:s}=t,r=S(e);if(!this._storage.get(r))this._storage.set(r,t);else throw`path: ${s} already used.`}get(t){let{parsed:e}=Se.cache(t,()=>At(t)),s={},r=this._storage.get(S(e));if(!r&&t!=="/")for(let i of this._storage.keys()){let a=[],n=ne(i);if(e.length===n.length){let h=n.map((l,c)=>{let v=Ee(e[c],e.length-1===c);if(l===v[0])return v[0];if(ke.includes(v[1]))return a.push(v[0]),v[1];return l}),o=S(h);if(this._storage.has(o)){r=this._storage.get(o),r?.args.forEach((l,c)=>{s[l]=a[c]});break}}}return[r,s]}}class nt{path="";parsed=[];args=[];constructor(t){bt(this,{path:t,...At(t)})}}class _e{static rand(t=6,e){if(e)return Math.floor(Math.random()*(e-t+1)+t);return Math.floor(Math.random()*t)+1-1}static fill(t,e=null){return Array(t).fill(e)}static new({dom:t,id:e,inner:s}){let r=document.createElement(t);if(e)r.id=e;if(s)r.innerHTML=s;return r}static randFrom(t){if(Array.isArray(t)){let e=t.length,s=this.rand(0,e-1);return t[s]}else if(typeof t=="object"){let e=L(t),s=e.length,r=this.rand(0,s-1);return e[r]}}static makeID=m;static class(t,e){let s=e;if(t?.class)s.push(...f(t.class)?t.class:[t.class]);t.class=e}static get O(){return{vals:$,keys:L,items:d,has:oe,ass:g,len:(t={})=>L(t).length}}static get is(){return mt}static get return(){return xt}}class xt{static array(t){return f(t)?t:[t]}}class Mt{value;constructor(t){this.value=t}get str(){return String(this.value).toString()=="null"?null:String(this.value).toString()}get int(){if(C(this.value))return parseInt(this.value);else return null}get float(){if(C(this.value))return parseFloat(this.value);else return null}get bool(){if(this.value==="true")return!0;else if(this.value=="false")return!1;else return null}get json(){if(this.value)return JSON.parse(this.value);return null}}class Ot{key;func;storage;constructor(t,e="local"){if(typeof t=="object"){let[s,r]=d(t)[0];this.key=s,this.func=r}else this.key=t,this.func=null;this.storage=e=="local"?localStorage:sessionStorage}get as(){return new Mt(this.storage.getItem(this.key))}get value(){return this.storage.getItem(this.key)}get save(){if(this.func)this.set=this.func();return}set set(t){if(typeof t=="object")this.storage.setItem(this.key,JSON.stringify(t));else this.storage.setItem(this.key,String(t))}get remove(){this.storage.removeItem(this.key);return}}var dt={get:(t)=>new Ot(t)};class N extends nt{id;cls;constructor(t,e,s){super(t);this.id=e,this.cls=s}}class Lt extends nt{id;cls;constructor(t,e,s){super(t);this.id=e,this.cls=s}}class Pt extends $t{storage=new q;errorStorage=new q;wssStorage=new q;route;error;wss;base;constructor(t=""){super();this.base=t.startsWith("/")?t:`/${t}`,this.route=(e)=>{return(s)=>{return this.storage.set(new N(this._base(e),m(5),s)),s}},this.wss=(e)=>{return(s)=>{return this.wssStorage.set(new Lt(this._base(e),m(5),s)),s}},this.error=(...e)=>{return(s)=>{if(e.length)e.forEach((r)=>{this.errorStorage.set(new N(r.toString(),m(5),s))});else this.errorStorage.set(new N("404",m(5),s));return s}}}_base(t){return he(this.base,t)}async getPath(t){return this.storage.get(t)}async loadError(t){return this.errorStorage.get(t.toString())}async loadWSS(t){return this.wssStorage.get(t)}}var P=new u,D=(t)=>{if(_)return;let e=P.get(t);if(e?.isConnected)return e;P.delete(t);let s=document.getElementById(t);if(!s)return;return P.set(t,s),s};function $e(){let t=[];return P.forEach((e,s)=>{if(!e.isConnected)t.push(s),P.delete(s)}),t}function Ct(t,e,{id:s="state",init:r}={}){let i=[],a=()=>e.map((h)=>h.value),n=()=>{t(...a())};if(e.forEach((h)=>{i.push(h.hook(n)(s))}),r)n();return()=>{i.forEach((h)=>h())}}var Ae=(t)=>{t.forEach((e)=>e())},je=(t,e)=>{for(let[s,r]of t){let i=D(s);if(!i){t.delete(s);continue}r.forEach((a)=>{a.call(i,e)})}};class H extends EventTarget{options;hooks=new u;states=new u;_value;listening=!1;end;constructor(t,e){super();this.options=e,this._value=t}get value(){return this._value}set value(t){if(F(t)||vt(t))return;if(rt(this._value)||f(this._value)){let e=kt(this._value,t);if(!fe(e))return}else if(this._value instanceof Set){if(!ce(this._value,t))return}else if(this._value===t)return;this._value=t,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let t=(e)=>{if(Ae(this.hooks),je(this.states,e.detail),!this.states.size&&!this.hooks.size)this.end?.()};if(!this.listening)this.addEventListener("updated",t,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",t,this.options),this.end=void 0,this.listening=!1}}call(t,e){return(s)=>{if(Et(s,this.states).set(e,t),!_&&!this.listening)this.end=this.listen;return()=>{if(this.states.has(s))this.states.get(s)?.delete(e)}}}hook(t){return(e)=>{if(this.hooks.set(e,t),!_&&!this.listening)this.end=this.listen;return()=>{if(this.hooks.has(e))this.hooks.delete(e)}}}}function k(t){return new H(t)}var Z=(t)=>{if(f(t))return t.filter((e)=>e!==void 0).join(" ");else if(y(t)){if(st(t))return S(t)}else if(M(t))return Z(t());else if(t!==void 0&&t!==null)return it(t)?t?"":"false":String(t);return""};function xe(t,e){switch(e??t){case"style":return function(s){this.style.setProperty(t,s)};default:return function(s){this.setAttribute(t,s)}}}class Rt{attr;constructor(t={}){this.attr=t}get(t,e=this.attr,s){let r=(i,a)=>{if(f(a))t.attr_push(i,Z(a));else if(a instanceof H){let n=s?`${s}_${i}`:i;t.states.push(a.call(xe(i,s),n)),r(i,a.value)}else if(y(a)){if(st(a)&&!s)this.get(t,a,i)}else t.attr_push(i,Z(a),s)};d(e).forEach(([i,a])=>{if(i==="ref"){if(a instanceof lt)t.events.obj({element(){a.element=this}})}else if(["on"].includes(i))y(e.on)&&t.events.obj(e.on);else r(i,a)})}}class ht{xid;IDM;map=new u;states=[];events=new u;OZ;constructor(t,e=new b,s){this.xid=t,this.IDM=e,this.OZ=s??new ot}attr_push(t,e,s){let r=s??t;if(!this.map.has(r))this.map.set(r,[]);let i=s?`${U(t)}:${e};`:e;this.map.get(r).push(i)}get attr(){let t=[""];return this.map.forEach((e,s)=>{let r=e.join("");t.push(r?`${s}="${r}"`:s)}),t.join(" ")}set id(t){if(!this.map.has("id"))this.map.set("id",[t])}get id(){return this.map.get("id")?.join("")}}var Me=(t,e,s)=>{return t.addEventListener(e,s),()=>{t.removeEventListener(e,s)}},O={};class ot{events=new u;states=new u;winStates=new u;windowEvents=new u;resetST=new u;resetEV=new u;constructor(){}get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(t){let{id:e,events:s,states:r}=t;if(e){if(s.size)this.events.set(e,s);if(r.length)this.states.set(e,r)}return this}push(t){return t.events.forEach((e,s)=>{e.forEach((r,i)=>{Et(s,this.events).set(i,r)})}),t.states.forEach((e,s)=>{z(s,this.states).push(...e)}),this}get stage(){return this.events.forEach((t,e)=>{this.events.delete(e);let s=D(e);if(!s){this.events.delete(e);return}t.forEach((r,i)=>{switch(i){case"ready":case"element":r.apply(s,[s]);break;case"resize":case"beforeunload":case"popstate":case"winscroll":case"winload":case"winfocus":case"winblur":let a=i.replace(/^win/,"");this.windowEvents.init(a,new u).set(e,r);break;case"watch":let[n,h,o]=r.apply(s,[s]),l=f(h)?h:[h],c=()=>l.map((B)=>B.value),v=()=>n(...c());if(o)v();l.forEach((B)=>z(e,this.resetST).push(B.call(v,e+"_watch")(e)));break;default:z(e,this.resetEV).push(Me(s,i,r))}})}),this.processWindowEvents,this.states.forEach((t,e)=>{this.states.delete(e),t.forEach((s)=>{z(e,this.resetST).push(s(e))})}),this}get processWindowEvents(){let t=(e,s)=>{let r=0,i=!1,a=(h)=>{if(r=window.scrollY,!i)window.requestAnimationFrame(()=>{s.forEach((o,l)=>{let c=D(l);if(c)o.call(c,h);else this.windowEvents.get(e)?.delete(l)}),i=!1}),i=!0},n=(h)=>{s.forEach((o,l)=>{let c=D(l);if(c)o.call(c,h);else this.windowEvents.get(e)?.delete(l)})};return window.addEventListener(e,e==="scroll"?a:n),()=>{window.removeEventListener(e,e==="scroll"?a:n)}};return this.windowEvents.forEach((e,s)=>{if(e.size){if(!O[s])O[s]=t(s,e)}else if(O[s])O[s](),delete O[s]}),this}reset(t){return t.forEach((e)=>{this.windowEvents.forEach((s,r)=>{if(s.has(e))s.delete(e)}),this.resetEV.get(e)?.forEach((s)=>{s()}),this.resetST.get(e)?.forEach((s)=>{s()}),this.resetST.delete(e),this.resetEV.delete(e)}),this}RPS(t){if(t){let e=$e();this.reset(e);let s=t.keys;if(s.length)this.reset(s).push(t).stage}return this}}var j=new ot,Oe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Le=(t)=>Oe.includes(t);function Pe(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Y=(t,e)=>{if(f(t))return t.map((s)=>Y(s,e)).join("");else if(t instanceof I){let s=t.__(e.IDM),{ctx:r,oz:i}=s;return e.OZ.push(i),r}else if(y(t))return S(t);else if(M(t))return Y(t(),e);else if(t!==void 0&&t!==null)return Pe(t);return""},Tt=(t,e)=>{let s=new b(t),r=new ht(s.id,s);return{ctx:Y(e,r),catt:r}};function Ce(t){let e=this.id;if(e){let{ctx:s,catt:r}=Tt(e,t);if(this.innerHTML!==s)this.innerHTML=s,j.RPS(r.OZ)}}var Q=(t,e,s,r=[])=>{if(f(t))t.forEach((i)=>{Q(i,t.length,s,r)});else if(t instanceof H)if(e>1)Q(V("div",{},t),e,s,r);else{let i=t.value,a=i instanceof I?"dom":"ctx",{ctx:n,catt:h}=Tt(s.xid+"-0",i);s.xid=h.xid,r.push(n),s.OZ.push(h.OZ),s.states.push(t.call(Ce,a))}else r.push(Y(t,s))};class Ht{tag;ctx;closing;constructor(t,e){this.tag=t,this.ctx=e;let s=Le(t);this.closing=s?"":`</${t}>`}process(t,e=this.ctx,s=[]){return e.forEach((r)=>{Q(r,e.length,t,s)}),s.join("")}get(t){let e=this.process(t);if(t.events.size||t.states.length)t.id=t.xid;return`<${this.tag}${t.attr}>${e}${this.closing}`}}class I{tag;constructor(t,e={},...s){this.tag=t,bt(this,{attr:new Rt(e),ctx:new Ht(t,s)})}__(t=new b){let e=t.mid,s=new ht(e,t);return this.attr.get(s),{ctx:this.ctx.get(s),oz:s.OZ.set(s),id:s.id}}}function V(t,e={},...s){if(M(t))return t(e??{},...s);return new I(t,e??{},s)}var ss=(t,...e)=>e;class It{e;opt;constructor(t){this.e=t,this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(t,e={}){return this.e.animate(t,e)}get slide(){let t=({x:e=0,y:s=0},r={})=>{g(this.opt,r);let i=[[e,s],[0,0]].map(([a,n])=>({transform:`translateX(${a}rem) translateY(${n}rem)`}));return this.e.animate(i,this.opt),this};return{left:(e={})=>{return t({x:-2},e)},right:(e={})=>{return t({x:2},e)},up:(e={})=>{return t({y:2},e)},down:(e={})=>{return t({y:-2},e)}}}fade(t={}){g(this.opt,t);let e=[0,1].map((s)=>({opacity:s}));return this.e.animate(e,this.opt),this}shake(t="Y",e={}){g(this.opt,e);let s=[0,5,-5,5,0].map((r)=>({transform:`translate${t}(${r}px)`}));return this.e.animate(s,this.opt),this}color(t=[],e={}){g(this.opt,e);let s=Array.isArray(t)?t.map((r)=>({color:r})):{color:t};return this.e.animate(s,this.opt),this}bg(t=[],e={}){g(this.opt,e);let s=Array.isArray(t)?t.map((r)=>({backgroundColor:r})):{backgroundColor:t};return this.e.animate(s,this.opt),this}bounce(t=1,e={}){g(this.opt,e);let s=[0.5,t,1].map((r)=>({transform:`scale(${r})`}));return this.e.animate(s),this}}class zt{e;query;constructor(t,e){this.e=t,this.query=e}get a(){return new It(this)}get all(){if(this.query){let t=document.querySelectorAll(this.query);if(t.length)return Array.from(t).map((e)=>e)}return[]}get attr(){let t=this.e;return{has:(e)=>{return t.hasAttribute(e)},get:(e)=>{return t.getAttribute(e)},del:(e)=>{return t.removeAttribute(e),this},set:(e)=>{for(let s in e){let r=e[s];if(e[s]!==void 0)t.setAttribute(s,Z(r))}return this}}}get children(){return Array.from(this.e.children).map((t)=>p(t))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get href(){return this.e?.href??""}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let t=this.e.offsetParent;if(t)return new x(t);return}get parent(){let t=this.e.parentElement;if(t)return new x(t);return}get path(){return this.e?.pathname??""}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let t=this.e.style,e=this;return{set:(s,r=0)=>{let i=t,a=()=>{d(s).forEach(([n,h])=>{if(n in i){if(i[n]!==h)i[n]=h}else if(h!==null)t.setProperty(n,String(h))})};if(M(r))e.on("transitionend",r);if(wt(r))setTimeout(a,r);else a();return e},get:(s)=>{return t.getPropertyValue(s.toString())},del:(...s)=>{s.forEach((r)=>{t.removeProperty(r.toString())})}}}get submit(){let t=this.e;if("submit"in t)return t.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}get unload(){return()=>{this.e.remove()}}set append(t){let{ctx:e,oz:s}=K(t,X(this.id));this.e.insertAdjacentHTML("beforeend",e),j.RPS(s)}set appendfirst(t){let{ctx:e,oz:s}=K(t,X(this.id));this.e.insertAdjacentHTML("afterbegin",e),j.RPS(s)}set inner(t){let{ctx:e,oz:s}=K(t,X(this.id));this.e.innerHTML=e,j.RPS(s)}set disabled(t){let e=this.e;if("disabled"in e)e.disabled=t}set id(t){this.e.id=t}set value(t){let e=this.e;e.value=t}}var K=(t,e)=>{if(t instanceof I)return t.__(new b(e));return{ctx:t,oz:void 0}},X=(t)=>t?`${t}-0`:t;class x extends zt{constructor(t,e){super(t,e)}add(...t){return this.e.classList.add(...t.map((e)=>e.replace(/[^\w-]/,""))),this}remove(...t){return this.e.classList.remove(...t.map((e)=>e.replace(/[^\w-]/,""))),this}toggle(t,e){let s=typeof t!="string"?t.apply(this):t,r=this.e.classList;return s.split(" ").forEach((i)=>{r.toggle(i,e)}),this}has(t){return this.e.contains(t)}insert(t){return{HTML:(...e)=>{return e.forEach((s)=>{this.e.insertAdjacentHTML(t,s)}),this},element:(...e)=>{return e.forEach((s)=>{this.e.insertAdjacentElement(t,s)}),this},text:function(...e){return e.forEach((s)=>{this.e.insertAdjacentText(t,s)}),this}}}is(t){let e=this.e.classList.value.split(" "),s=this.e.tagName.toLocaleLowerCase(),r=!0,i=!0;if(t.dom)i=t.dom==s?!0:!1;if(t.class)if(Array.isArray(t.class))t.class.forEach((a)=>{r=r?e.includes(a):!1});else r=r?e.includes(t.class):!1;return r&&i}on(t,e,s=!1){let r=!1;if(t.indexOf("touch")>-1)r=!0;return this.e.addEventListener(t,e,{capture:s,passive:r}),this}remove_on(t,e,s=!1){return this.e.removeEventListener(t,e,s),this}timed(t,e=250){return setTimeout(()=>t(this),e),this}animate(t,e,s){let r={duration:300,easing:"ease",fill:"forwards"};if(M(e))s=e;else g(r,e);let i=this.e.animate(t,r);if(s)i.finished.then(s);return this}}function p(t){if(at(t)){let e=document.querySelector(t);if(e)return new x(e,t);return}else return new x(t)}class lt{state=new H(void 0);constructor(){}get element(){return this.state.value?.e}set element(t){this.state.value=new x(t)}get $(){return this.state.value}}var rs=()=>{return new lt};class Wt extends _t{path;args;id;status;lang;import;_data={};constructor(t,e={},s,r=200){super();this.path=t,this.args=e,this.id=s,this.status=r}async loader(){if(this.import)try{let t=await this.import;if(t.default)this.import=await t.default({...this.args,...this.data});else this.import=void 0}catch(t){T.p=t,this.import=void 0}if(this.body){let t=await this.body();return f(t)?t:[t]}if(this.import){let t=this.import;return f(t)?t:[t]}return[]}getHeadAttr(t={},...e){let s=new J;if(w(t))s.head=t;s.id=this.id;let r=s.head;return e.forEach((i)=>{r.map(i)}),Re(s,this),r}set data(t){g(this._data,t)}get data(){return this._data}}class qt extends Wt{head(){this.title=`error ${this.status}`}body(){return V("div",{},this.path+" not found...")}}function Re(t,e){let{link:s,script:r,meta:i,title:a,base:n,description:h,css:o}=e;if(t.head={title:a,base:n,meta:i,link:s,script:r},h)t.head={meta:[{name:"description",content:h}]};if(o){let l=(f(o)?o:[o]).map((c)=>({rel:`${_?"preload ":""}stylesheet`,href:c,as:"style"}));if(t.head.lacks("link"));t.head={link:[...l]}}}function Te(t){let e=[];if(t?.length){let{href:s,target:r}=t[0],i=p("base");if(i)i.attr.set({href:s,target:r});else{let a=p(document.createElement("base"));a.attr.set({href:s,target:r}),document.head.append(a.e)}}return e}var pt=new u;async function He(t,e={},s=!1){let r=ut.value,i={};if(p("link")?.all.forEach((a)=>{let n=p(a),h=n.attr.get("href");if(h){let o=n.attr.get("rt");if(s){let l=pt.get(r);if(l){if(!l.has(h))i[h]=n.unload}else i[h]=n.unload}else if(o){if(o===t)i[h]=n.unload}}}),e&&w(e))for(let a of $(e)){let n=a.href;if(!(n in i))try{if(!s){a.rt=t;let h=pt.init(r,new Set);if(!h.has(n))h.add(n)}await ye(a)}catch(h){T.p=h}else delete i[n]}return $(i)}var Ie=["charset","name","property","http-equiv"];function ze(t){let e={};if(p("meta")?.all.forEach((s)=>{let r=s.attributes;for(let i of Ie)if(i in r){let a=r[i].value;e[`${i}_${i==="charset"?"":a}`]=s}}),t)d(t).forEach(([s,r])=>{if(s in e)p(e[s]).attr.set(r),delete e[s];else{let i=p(document.createElement("meta"));i.attr.set(r),document.head.append(i.e)}});return $(e).map((s)=>p(s).unload)}var gt=new u;async function We(t,e,s=!1){let r=ut.value,i={};if(p("script[yid]")?.all.forEach((a)=>{let n=p(a),h=n.attr.get("yid");if(h){let o=n.attr.get("rt");if(s){let l=gt.get(r);if(l){if(!l.has(h))i[h]=n.unload}else i[h]=n.unload}else if(o){if(o===t)i[h]=n.unload}}}),e){for(let a of e)if("yid"in a)if(a.yid in i)delete i[a.yid];else try{if(!s){a.rt=t;let n=a.yid,h=gt.init(r,new Set);if(!h.has(n))h.add(n)}await be(a)}catch(n){T.p=n}}return $(i)}var W="";async function qe(t,e,s=!1){let r=[];if(_)return[];let i=t.get("title")??"",{pushState:a}=this.config;if(a){let n=this.path.value;if(W!==n){if(!W.startsWith(n))tt(n,i),W=n;else if(n===this.base)tt(n,i),W=n}}if(document.title=i,s)document.documentElement.lang=e,r.push(...Te(t.get("base"))),r.push(...ze(t.get("meta")));return r.push(...await He(this.id,t.get("link"),s)),r.push(...await We(this.id,t.get("script"),s)),r}function tt(t,e){let s=window.location.pathname;if(t&&s!==t)history.pushState({},e??"",t)}class Nt{lang;head="";constructor(t,e){if(this.lang=t,e)this.head=ve(e)}body(t,e,s){return[`<!DOCTYPE html><html lang="${this.lang}">`,`<head>${this.head}</head>`,`<body id="${e??m(5)}"${s?" "+s:""}>${t}</body>`,"</html>"].join("")}}class Ne{path;args;isConnected=k(!1);data={};constructor(t,e={}){this.path=t,this.args=e}open(t){}message(t){}close(t){}error(t){}get connect(){if(this.ws&&this.ws.readyState<=1)return this;return this.ws=new WebSocket(this.path),this.ws.onopen=async(t)=>{this.isConnected.value=!0,await this.open.call(this,t)},this.ws.onmessage=async(t)=>{await this.message.call(this,t)},this.ws.onclose=async(t)=>{this.isConnected.value=!1,await this.close.call(this,t)},this.ws.onerror=async(t)=>{this.isConnected.value=this.ws.readyState<=1,await this.error.call(this,t)},this}get reconnect(){if(this.state>=2)this.connect;return this}get disconnect(){if(this.state<=1)this.ws.close();return this}get state(){return this.ws?.readyState??3}set send(t){this.ws.send(t)}}var A=new u;class Dt{yra;constructor(t){this.yra=t}async load(t){if(!A.has(t)){let[s,r]=await this.yra.loadWSS(t);if(!s)return;let{cls:i,path:a,id:n}=s,h=new i(a,r).connect;return A.set(t,h),h}let e=A.get(t);return e.reconnect,e}unload(t){if(A.has(t)){let e=A.get(t);if(!e)return;e.disconnect,A.delete(t)}}}function De(t,e,s,r){let i={...t.on??{},click(a){a.preventDefault(),r.value=s.value,s.value=p(this).path}};return delete t.on,V("a",{...t,on:{...i}},...e)}function Fe(t,e,s){let{classes:r}=t.config,{on:i,...a}=e,n={...e.on??{},...{popstate(h){let o=h.target;if(o.location.pathname.includes(t.base))t.path.value=o.location.pathname},element(h){t.mainElement=this}}};return V("div",{...a,...r&&{class:r},on:n},t.root)}class Ft extends Pt{config;isYRA;unload=!1;hook;root=k([]);socket;id=m(4);path=k("");lastPath=k("");loading=k(!1);mainElement;A;Main;load;matchPath;constructor(t={},e=!1,s={}){super(t.base??"");if(this.config=t,this.isYRA=e,this.socket=new Dt(this),t.id)this.id=t.id;this.A=(r,...i)=>{if(this.base){if(!r.href.startsWith(this.base))r.href=this._base(r.href)}return De(r,i,this.path,this.lastPath)},this.Main=(r)=>{if(w(s))if(!r.on)r.on=s;else g(r.on,s);return Fe(this,r,e)},this.load=async(r,i={})=>{if(this.hook)this.hook();if(r)this.path.value=r,this.lastPath.value=r,await this.render(this.path.value,404,i),this.hooker();return this},this.matchPath=(r)=>{let i=this._base(r),a=this.path.value,n=this.base;if(a===i)return!0;else{let h=a.replace(n,""),o=i.replace(n,"");if(o&&h.startsWith(o))return!0}return!1}}hooker(){let t={},e={},s=this.path.value;if(this.hook)this.hook();this.hook=Ct(async(r)=>{if(e[s]=window.scrollY,t[s]=this.mainElement?.scrollTop??0,(await this.render(r,404)).done){let i=e[r]??0;if(i)window.scrollTo({top:i,behavior:"instant"});let a=t[r]??0;if(a)this.mainElement?.scrollTo({top:a,behavior:"instant"});s=r}},[this.path],{id:"router"})}async class(t,e,s=!1){let[r,i]=await this.getPath(t);if(r&&!s){let{cls:a,id:n}=r;return new a(t,i,n)}else return await Ze.call(this,t,e)}async fetch(t){if(t)try{if(t.fetch){let e=await t.fetch();if(rt(e)&&w(e))t.data=e}}catch(e){T.p=e}}async processHead(t,e={}){return t?await this.processClassHead(t,e):await this.processDefaultHead(e)}async processClassHead(t,e){if(t.head)await t.head();return t.getHeadAttr(e,this.htmlHead)}async processDefaultHead(t){let e=new J;if(w(t))e.head=t;return e.head.map(this.htmlHead),e.head}async render(t,e=404,s={},r={},i=!0,a=!1){let n=await this.class(t,e??Ve(),a);n.data=s,await this.fetch(n);let h=await this.processHead(n,r);if(!n)return{lang:this.lang,heads:h,done:!1};let o=[];if(this.loading.value=!0,this.unload)o=await n.loader();let l=[];if(i)l=await qe.call(this,h,n?.lang||this.lang,this.unload);if(!this.unload)l.forEach((c)=>c()),o=await n.loader();if(this.unload)l.forEach((c)=>c());if(o.length)this.root.value=o;else await this.render(t,e,s,r,i,!0);return this.loading.value=!1,{heads:h,lang:n.lang??this.lang,done:!0}}}async function Ze(t,e){let[s,r]=await this.loadError(e??0);if(s){let{cls:i,id:a}=s;return new i(t,r,a,e)}else{let i=new qt(t,r,m(5));return i.title=`error ${e}`,i}}var ut=k("");class Ye extends Ft{ImportMeta;config;unload=!0;constructor(t,e={},s={}){super(e,!0,s);this.ImportMeta=t,this.config=e,this.path=ut,this.head({meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"}]}),this.load=async(r,i={})=>{if(R)r=Be()||this._base(r??"/");if(this.hook)this.hook();if(r)this.path.value=r;if(R&&r)this.render(r,404,i).then(()=>{if(r&&this.config.pushState)tt(r,document.title);Je.call(this,this.Main({})),this.hooker()});return this}}async html({path:t,data:e={},status:s=200,attr:r=""}){let i={base:[{href:`${this.base}/`,target:"_blank"}],script:[{type:"module",src:`${this.ImportMeta.file}`}]};Ge(i,t,s),this.path.value=t;let{lang:a,heads:n}=await this.render(t,s,e,i,!1),{ctx:h}=this.Main({}).__(new b(this.id));return new Nt(a,n).body(h,this.id,r)}}function Je(t){let e=document.body.id,{oz:s,id:r}=t.__(new b(e));if(this.id=r||this.id,!s)return;j.push(s),requestAnimationFrame(()=>{j.stage})}function Ve(){if(R)return parseInt(p('meta[name="error-code"]')?.attr.get("content")??"404");return 404}function Be(){if(R)return p('meta[name="yvee"]')?.attr.get("content")??"/";return""}var Ge=(t,e,s)=>{let r=[];if(s)switch(s){case 404:r.push({name:"error-code",content:s.toString()});break;default:break}r.push({name:"yvee",content:e}),t.meta=r},is=(t)=>{return(e)=>{t(e)}},as=(t)=>{return(e)=>{t(e)}};class et{state;body;click;constructor({toggle:t=[],initialState:e=!1}={}){this.state=k(e);let s=this.state;this.click=function(){s.value=!s.value},this.loader(t)}loader(t){if(typeof window==="undefined")return;let e=dt.get("LOCAL_SCHEME"),s=this.isDark,r=e.as.bool,i=dt.get({IS_DARK:()=>this.state.value});if(r!=null&&r!==s)this.state.value=!r,i.save,e.set=s;if(i.as.bool!==null)this.state.value=i.as.bool;let a=this.toggle,n=document.documentElement.classList;if(a(n,this.state.value,t),Ct(async(h)=>{a(n,h,t),i.save},[this.state],{id:"colorScheme"}),this.isMatchMediaSupported)window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(h)=>{let o=(h.matches?"dark":"light")==="dark";this.state.value=o,e.set=o})}get isMatchMediaSupported(){return window.matchMedia&&typeof window.matchMedia==="function"}get isDark(){return window.matchMedia("(prefers-color-scheme: dark)").matches}toggle(t,e,s){if(e)t.add(...s);else t.remove(...s)}}et=Kt([de,Xt("design:paramtypes",[Object])],et);
export{Ke as D,Xe as E,Ue as F,Qe as G,St as H,_e as I,k as J,V as K,ss as L,p as M,rs as N,Wt as O,Ft as P,Ye as Q,is as R,as as S};
